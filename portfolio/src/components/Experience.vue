<script setup lang="ts">
import { ref, onMounted, onUnmounted } from 'vue'
import { useI18n } from 'vue-i18n'

// Lightbox state
const selectedImage = ref<string | null>(null)
const selectedImageTitle = ref<string>('')

const openLightbox = (image: string, title: string) => {
  selectedImage.value = image
  selectedImageTitle.value = title
  document.body.style.overflow = 'hidden'
}

const closeLightbox = () => {
  selectedImage.value = null
  selectedImageTitle.value = ''
  document.body.style.overflow = ''
}

// Handle ESC key to close lightbox
const handleKeydown = (e: KeyboardEvent) => {
  if (e.key === 'Escape' && selectedImage.value) {
    closeLightbox()
  }
}

onMounted(() => {
  document.addEventListener('keydown', handleKeydown)
})

onUnmounted(() => {
  document.removeEventListener('keydown', handleKeydown)
})
import eyTeamImage from '../assets/images/experience/ey-team.jpeg'
import eyLogo from '../assets/images/companies/EY.png'
import hengjiaLogo from '../assets/images/companies/hengjia.png'
import xindianLogo from '../assets/images/companies/xindian.png'
import azureLogo from '../assets/images/icons/MicrosoftAzure.jpeg'
import academiaSinicaLogo from '../assets/images/companies/academia-sinica.png'
import transportSocietyLogo from '../assets/images/companies/transport-society.png'
import tkuStatsLogo from '../assets/images/companies/tku-stats.png'
import sasLogo from '../assets/images/icons/SAS.png'
// Award/certificate images
import highwayCertImage from '../assets/images/experience/highway-certificate.jpeg'
import academiaSinicaAwardImage from '../assets/images/experience/academia-sinica-award.jpeg'
import aiCertImage from '../assets/images/experience/ai-cert.png'
import azureBadgeImage from '../assets/images/experience/azure-badge.png'
import sasCertImage from '../assets/images/experience/sas-cert.png'
import esgCertImage from '../assets/images/experience/esg-cert.png'
import tkuCommunityImage from '../assets/images/experience/tku-community.png'

const { t, locale } = useI18n()

const activeFilter = ref('all')

const filters = [
  { key: 'all', label: 'ÂÖ®ÈÉ®', labelEn: 'All', icon: 'üìã' },
  { key: 'work', label: 'Â∑•‰ΩúÁ∂ìÊ≠∑', labelEn: 'Work', icon: 'üíº' },
  { key: 'education', label: 'Â≠∏Ê≠∑', labelEn: 'Education', icon: 'üéì' },
  { key: 'certification', label: 'Â∞àÊ•≠Ë≠âÁÖß', labelEn: 'Certifications', icon: 'üèÖ' },
  { key: 'award', label: 'Á´∂Ë≥Ω/Áç≤Áçé', labelEn: 'Awards', icon: 'üèÜ' },
  { key: 'service', label: 'ÊúçÂãô/ÊºîË¨õ', labelEn: 'Service', icon: 'ü§ù' },
]

// Timeline items sorted by date (newest first)
const timelineItems = [
  // 2025/12
  {
    type: 'service',
    year: '2025',
    month: '12',
    title: '‰∏≠ËèØÊ∞ëÂúãÈÅãËº∏Â≠∏ÊúÉÂπ¥ÊúÉ',
    titleEn: 'Chinese Institute of Transportation Annual Conference',
    subtitle: 'ÂèóÈÇÄÊºîË¨õÂòâË≥ì',
    subtitleEn: 'Invited Speaker',
    period: '2025/12',
    description: 'ÂèóÈÇÄÊñº‰∏≠ËèØÊ∞ëÂúãÈÅãËº∏Â≠∏ÊúÉÂπ¥ÊúÉÁôºË°®Â∞àÈ°åÊºîË¨õÔºåÂàÜ‰∫´ÂúãÈÅìÊô∫ÊÖß‰∫§ÈÄöÈ†êÊ∏¨Á≥ªÁµ±Á†îÁ©∂ÊàêÊûúËàáÊ∑±Â∫¶Â≠∏ÁøíÂú®‰∫§ÈÄöÈ†òÂüüÁöÑÂâµÊñ∞ÊáâÁî®„ÄÇ',
    descriptionEn: 'Invited to deliver a keynote speech at the national transportation conference, sharing research on highway traffic prediction and deep learning applications in transportation.',
    tags: ['Public Speaking', 'Research', 'Deep Learning'],
    logo: transportSocietyLogo,
    color: 'from-purple-500 to-indigo-600',
  },
  // 2025/11
  {
    type: 'certification',
    year: '2025',
    month: '11',
    title: 'Microsoft Azure ‰∏âÈ†ÖË™çË≠â',
    titleEn: 'Microsoft Azure Triple Certifications',
    subtitle: 'AI-900 / AZ-900 / DP-900',
    subtitleEn: 'AI-900 / AZ-900 / DP-900',
    period: '2025/11',
    description: 'ÂêåÊôÇÂèñÂæó Azure AI Âü∫Á§é„ÄÅAzure Âü∫Á§éËàáË≥áÊñôÂü∫Á§é‰∏âÈ†Ö Microsoft ÂÆòÊñπË™çË≠âÔºåÂÖ®Èù¢ÊéåÊè°Èõ≤Á´ØËàá AI ÊúçÂãôÊû∂Êßã„ÄÇ',
    descriptionEn: 'Obtained three Microsoft Azure certifications simultaneously: AI Fundamentals, Azure Fundamentals, and Data Fundamentals.',
    tags: ['Azure', 'AI', 'Cloud', 'Data'],
    logo: azureLogo,
    color: 'from-blue-500 to-cyan-600',
    image: azureBadgeImage,
  },
  // 2025/10
  {
    type: 'award',
    year: '2025',
    month: '10',
    title: 'ÂúãÈÅìÊô∫ÊÖß‰∫§ÈÄöÂâµÊñ∞ÊáâÁî®Á´∂Ë≥Ω',
    titleEn: 'National Highway Smart Traffic Innovation Competition',
    subtitle: 'Á¨¨‰∫åÂêç',
    subtitleEn: '2nd Place',
    period: '2025/10',
    description: 'ÂèÉËàáÈ´òÈÄüÂÖ¨Ë∑ØÂ±Ä‰∏ªËæ¶‰πãÂÖ®ÂúãÊÄßÁ´∂Ë≥ΩÔºåÈñãÁôºÊï¥ÂêàÊ∑±Â∫¶Â≠∏ÁøíÊôÇÁ©∫Á•ûÁ∂ìÁ∂≤Ë∑ØËàá LWR Áâ©ÁêÜÈúáÊ≥¢ÁêÜË´ñÁöÑ‰∫§ÈÄöÂ£ÖÂ°ûÈ†êÊ∏¨Á≥ªÁµ±ÔºåÂæûÁúæÂ§öÂúòÈöä‰∏≠ËÑ´Á©éËÄåÂá∫„ÄÇ',
    descriptionEn: 'Developed traffic congestion prediction system integrating deep learning spatio-temporal networks and LWR shockwave theory, winning 2nd place in the national competition.',
    tags: ['Deep Learning', 'GNN', 'Traffic', 'Python'],
    icon: 'üöó',
    color: 'from-green-500 to-emerald-600',
    image: highwayCertImage,
    github: 'https://github.com/timwei0801/Highway_trafficwave',
  },
  {
    type: 'award',
    year: '2025',
    month: '10',
    title: 'Ê∑°Ê±üÂ§ßÂ≠∏Áµ±Ë®àÂ≠∏Á≥ª',
    titleEn: 'TKU Statistics Department',
    subtitle: '113-1 Â≠∏ÊúüÊàêÁ∏æÁ¨¨‰∫åÂêç',
    subtitleEn: '113-1 Semester 2nd Place',
    period: '2025/10',
    description: 'Á†îÁ©∂ÊâÄÁ¢©Â£´Áè≠ 113 Â≠∏Âπ¥Â∫¶Á¨¨‰∏ÄÂ≠∏ÊúüÂ≠∏Ê•≠ÊàêÁ∏æÂÑ™Áï∞ÔºåÁç≤ÂæóÂπ¥Á¥öÁ¨¨‰∫åÂêçÊÆäÊ¶Æ„ÄÇ',
    descriptionEn: 'Achieved 2nd place in academic performance for the first semester of the 113 academic year in the graduate program.',
    tags: ['Academic', 'Excellence'],
    logo: tkuStatsLogo,
    color: 'from-blue-400 to-indigo-500',
  },
  // 2025/09
  {
    type: 'award',
    year: '2025',
    month: '09',
    title: '‰∏ªË®àÁçéÂ≠∏Èáë',
    titleEn: 'Accounting and Statistics Scholarship',
    subtitle: 'ÁçéÂ≠∏ÈáëÂæóÁçé‰∫∫',
    subtitleEn: 'Scholarship Recipient',
    period: '2025/09',
    description: 'Ê¶ÆÁç≤‰∏ªË®àÁçéÂ≠∏ÈáëÔºåË°®ÂΩ∞Áµ±Ë®àÂ∞àÊ•≠È†òÂüüÁöÑÂ≠∏Ë°ìË°®ÁèæËàáÁ†îÁ©∂ÊΩõÂäõ„ÄÇ',
    descriptionEn: 'Received the Accounting and Statistics Scholarship, recognizing academic excellence and research potential in statistics.',
    tags: ['Scholarship', 'Statistics'],
    icon: 'üèÖ',
    color: 'from-yellow-500 to-orange-500',
  },
  {
    type: 'award',
    year: '2025',
    month: '09',
    title: 'ÂÑ™ËâØÊïôÂ≠∏Âä©ÁêÜ',
    titleEn: 'Outstanding Teaching Assistant',
    subtitle: 'ÊèêÂêçÂÄôÈÅ∏‰∫∫',
    subtitleEn: 'Nominee',
    period: '2025/09',
    description: 'Âõ†ÂçîÂä©ÊïôÊéàË™≤Á®ãÊïôÂ≠∏Ë°®ÁèæÂÑ™Áï∞ÔºåÁç≤ÊèêÂêçÁÇ∫ÂÑ™ËâØÊïôÂ≠∏Âä©ÁêÜÂÄôÈÅ∏‰∫∫„ÄÇ',
    descriptionEn: 'Nominated as Outstanding Teaching Assistant candidate for excellent performance in assisting course instruction.',
    tags: ['Teaching', 'Leadership'],
    icon: 'üë®‚Äçüè´',
    color: 'from-teal-400 to-cyan-500',
  },
  // 2025/07
  {
    type: 'work',
    year: '2025',
    month: '07',
    title: 'ÂÆâÊ∞∏ËÅØÂêàÊúÉË®àÂ∏´‰∫ãÂãôÊâÄ',
    titleEn: 'Ernst & Young (EY Taiwan)',
    subtitle: 'ÂÖ®Á´ØÈñãÁôºÂØ¶ÁøíÁîü',
    subtitleEn: 'Full-Stack Developer Intern',
    period: '2025/07 - Present',
    location: 'Taipei',
    description: 'ÊñºÂÖ®ÁêÉÂõõÂ§ßÊúÉË®àÂ∏´‰∫ãÂãôÊâÄ‰πã‰∏ÄÁöÑ EY Âè∞ÁÅ£Êìî‰ªªÊäÄË°ìÈÉ®ÈñÄÂÖ®Á´ØÈñãÁôºÂØ¶ÁøíÁîüÔºåË≤†Ë≤¨‰ºÅÊ•≠Á¥öÂ∞àÊ°àÁÆ°ÁêÜÁ≥ªÁµ±ÁöÑÂâçÂæåÁ´ØÈñãÁôºÔºåÈÅãÁî® Vue.js ÊâìÈÄ†È´òÊïàËÉΩÁî®Êà∂‰ªãÈù¢Ôºå‰∏¶‰∏ªÂ∞é Python Ëá™ÂãïÂåñÊµÅÁ®ãÂÑ™ÂåñÂ∞àÊ°à„ÄÇ',
    descriptionEn: 'Full-stack development intern at EY Taiwan (Big Four), responsible for enterprise project management system development. Building high-performance user interfaces with Vue.js and leading Python automation initiatives.',
    achievements: [
      'Áç®Á´ãË≤†Ë≤¨ Vue.js ÂâçÁ´ØÊ®°ÁµÑÈñãÁôºÔºåÂØ¶ÁèæÁµÑ‰ª∂ÂåñÊû∂ÊßãËàá RESTful API Êï¥Âêà',
      'ÂÑ™ÂåñÈ†ÅÈù¢ËºâÂÖ•ÊïàËÉΩ 40%ÔºåÂ∞éÂÖ•Êá∂Âä†ËºâËàáËôõÊì¨ÊªæÂãïÊäÄË°ì',
      'ÈñãÁôº Python Ëá™ÂãïÂåñÁà¨Ëü≤Á≥ªÁµ±ÔºåÊØèÈÄ±ÁØÄÁúÅ 10+ Â∞èÊôÇ‰∫∫Â∑•‰ΩúÊ•≠',
    ],
    achievementsEn: [
      'Led Vue.js frontend module development with component-based architecture and RESTful API integration',
      'Improved page load performance by 40% through lazy loading and virtual scrolling',
      'Developed Python automation system, saving 10+ hours of manual work weekly',
    ],
    tags: ['Vue.js', 'Python', 'Spring Boot', 'Linux'],
    logo: eyLogo,
    color: 'from-yellow-400 to-yellow-600',
    image: eyTeamImage,
    highlight: true,
  },
  // 2025/02
  {
    type: 'award',
    year: '2025',
    month: '02',
    title: 'Ê∑°Ê±üÂ§ßÂ≠∏Áµ±Ë®àÂ≠∏Á≥ª',
    titleEn: 'TKU Statistics Department',
    subtitle: '112-2 Â≠∏ÊúüÊàêÁ∏æÁ¨¨‰∫åÂêç',
    subtitleEn: '112-2 Semester 2nd Place',
    period: '2025/02',
    description: 'Á†îÁ©∂ÊâÄÁ¢©Â£´Áè≠ 112 Â≠∏Âπ¥Â∫¶Á¨¨‰∫åÂ≠∏ÊúüÂ≠∏Ê•≠ÊàêÁ∏æÂÑ™Áï∞ÔºåÁç≤ÂæóÂπ¥Á¥öÁ¨¨‰∫åÂêçÊÆäÊ¶Æ„ÄÇ',
    descriptionEn: 'Achieved 2nd place in academic performance for the second semester of the 112 academic year in the graduate program.',
    tags: ['Academic', 'Excellence'],
    logo: tkuStatsLogo,
    color: 'from-blue-400 to-indigo-500',
  },
  // 2024/11
  {
    type: 'award',
    year: '2024',
    month: '11',
    title: '‰∏≠Á†îÈô¢Áµ±Ë®àÊâÄÊµ∑Â†±Á´∂Ë≥Ω',
    titleEn: 'Academia Sinica Statistics Poster Competition',
    subtitle: 'ÊúÄ‰Ω≥Êµ∑Â†±Áçé & Ë©ïÂØ©ÂúòÁâπÂà•Áçé',
    subtitleEn: 'Best Poster Award & Jury Special Award',
    period: '2024/11',
    description: '‰ª•„ÄåÁ∂≤Ë∑Ø‰ΩøÁî®Ë°åÁÇ∫ËàáÈú∏ÂáåÂÇæÂêëÈóúËÅØÊÄßÁ†îÁ©∂„ÄçÂèÉÂä†‰∏≠Á†îÈô¢Ë≥áÊñôÁßëÂ≠∏Êº´Ê≠•Êµ∑Â†±Á´∂Ë≥ΩÔºåÈÅãÁî®Âª£Áæ©ÈóúËÅØÂúñ (GAP) Á≠âÂ§öËÆäÈáèÁµ±Ë®àÊñπÊ≥ïÈÄ≤Ë°åÂâµÊñ∞ÂàÜÊûêÔºåÁç≤ÂæóÈõôÈ†ÖÊÆäÊ¶Æ„ÄÇ',
    descriptionEn: 'Won dual awards for research on "Internet Usage and Bullying Tendency" using innovative multivariate statistical methods including Generalized Association Plot (GAP).',
    tags: ['Statistics', 'Research', 'Data Analysis'],
    logo: academiaSinicaLogo,
    color: 'from-purple-500 to-pink-500',
    image: academiaSinicaAwardImage,
    github: 'https://github.com/timwei0801/MVA-Internet-use-and-bullying',
  },
  // 2024/09
  {
    type: 'education',
    year: '2024',
    month: '09',
    title: 'Ê∑°Ê±üÂ§ßÂ≠∏Áµ±Ë®àÂ≠∏Á†îÁ©∂ÊâÄ',
    titleEn: 'Tamkang University Graduate Institute of Statistics',
    subtitle: 'Êï∏ÊìöÁßëÂ≠∏Á¢©Â£´Áè≠',
    subtitleEn: 'Master of Data Science',
    period: '2024/09 - Present',
    location: 'New Taipei',
    description: 'ÈÄ≤ÂÖ•Ê∑°Ê±üÂ§ßÂ≠∏Áµ±Ë®àÂ≠∏Á†îÁ©∂ÊâÄÊï∏ÊìöÁßëÂ≠∏Á¢©Â£´Áè≠Ê∑±ÈÄ†ÔºåÂ∞àÊ≥®ÊñºÊ©üÂô®Â≠∏Áøí„ÄÅÊ∑±Â∫¶Â≠∏ÁøíËàáÁµ±Ë®àÂª∫Ê®°Á†îÁ©∂ÔºåÁµêÂêàÁêÜË´ñÂü∫Á§éËàáÂØ¶ÂãôÊáâÁî®„ÄÇ',
    descriptionEn: 'Pursuing Master\'s degree in Data Science at TKU Graduate Institute of Statistics, focusing on machine learning, deep learning, and statistical modeling research.',
    tags: ['Data Science', 'Machine Learning', 'Statistics'],
    logo: tkuStatsLogo,
    color: 'from-red-500 to-rose-600',
    highlight: true,
  },
  // 2024/05
  {
    type: 'certification',
    year: '2024',
    month: '05',
    title: 'ESG ÂàùÈöéÁÆ°ÁêÜÂ∏´',
    titleEn: 'ESG Foundation Manager',
    subtitle: 'Ê∞∏Á∫åÁÆ°ÁêÜË™çË≠â',
    subtitleEn: 'Sustainability Management Certification',
    period: '2024/05',
    description: 'ÂÆåÊàê ESG ÂàùÈöéÁÆ°ÁêÜÂ∏´Â∞àÊ•≠ÂüπË®ìË™çË≠âÔºåÊéåÊè°‰ºÅÊ•≠Ê∞∏Á∫åÁôºÂ±ïÁ≠ñÁï•ËàáÁ¢≥Áõ§Êü•ÂØ¶ÂãôÂü∫Á§é„ÄÇ',
    descriptionEn: 'Completed ESG foundation manager certification, mastering corporate sustainability strategies and carbon inventory basics.',
    tags: ['ESG', 'Sustainability'],
    icon: 'üå±',
    color: 'from-green-400 to-teal-500',
    image: esgCertImage,
  },
  // 2024/02
  {
    type: 'work',
    year: '2024',
    month: '02',
    title: '‰∫®Âòâ‰ºÅÊ•≠ÊúâÈôêÂÖ¨Âè∏',
    titleEn: 'Heng Jia Enterprise Co., Ltd.',
    subtitle: 'ESG Ê∞∏Á∫åÊúçÂãôÂØ¶ÁøíÁîü',
    subtitleEn: 'ESG Services Intern',
    period: '2024/02 - 2024/05',
    location: 'Taipei',
    description: 'Êìî‰ªª ESG Ê∞∏Á∫åÊúçÂãôÈÉ®ÈñÄÂØ¶ÁøíÁîüÔºåË≤†Ë≤¨‰ºÅÊ•≠ÂÆ¢Êà∂ÈñãÁôºËàáÊ∞∏Á∫åËß£Ê±∫ÊñπÊ°àÊé®Âª£ÔºåÁ¥ØÁ©ç B2B ÂïÜÂãôÊ∫ùÈÄöËàáÂ∞àÊ°àÊèêÊ°àÂØ¶Êà∞Á∂ìÈ©ó„ÄÇ',
    descriptionEn: 'ESG services intern responsible for enterprise client development and sustainability solution promotion, gaining B2B communication and project proposal experience.',
    achievements: [
      'ÂçîÂä© 10+ ÂÆ∂‰ºÅÊ•≠ÂÆ¢Êà∂ÈÄ≤Ë°åÊ∞∏Á∫åÁôºÂ±ïË´ÆË©¢ÊúçÂãô',
      'ÂèÉËàá ESG Â†±ÂëäÊõ∏Á∑®Êí∞ÔºåÊéåÊè° GRI Ê∫ñÂâáÊáâÁî®',
      'Ë¶èÂäÉÁ¢≥Áõ§Êü•Ë™çË≠âÂüπË®ìË™≤Á®ãÂÖßÂÆπ',
    ],
    achievementsEn: [
      'Provided sustainability consulting for 10+ enterprise clients',
      'Participated in ESG report writing with GRI standards',
      'Planned carbon inventory certification training programs',
    ],
    tags: ['ESG', 'Consulting', 'B2B'],
    logo: hengjiaLogo,
    color: 'from-green-400 to-emerald-600',
  },
  // 2023/10
  {
    type: 'certification',
    year: '2023',
    month: '10',
    title: '‰∫∫Â∑•Êô∫ÊÖßÂ∞àÈ†ÖË≠âÁÖß',
    titleEn: 'Artificial Intelligence Specialty Certificate',
    subtitle: 'AI Â∞àÊ•≠Ë™çË≠â',
    subtitleEn: 'AI Professional Certification',
    period: '2023/10',
    description: 'ÂèñÂæó‰∫∫Â∑•Êô∫ÊÖßÂ∞àÈ†ÖË™çË≠âÔºåÈ©óË≠âÂú® AI ÁêÜË´ñËàáÊáâÁî®ÊñπÈù¢ÁöÑÂ∞àÊ•≠Áü•Ë≠ò„ÄÇ',
    descriptionEn: 'Obtained AI specialty certification, validating professional knowledge in AI theory and applications.',
    tags: ['AI', 'Machine Learning'],
    icon: 'ü§ñ',
    color: 'from-violet-500 to-purple-600',
    image: aiCertImage,
  },
  // 2023/05
  {
    type: 'certification',
    year: '2023',
    month: '05',
    title: 'SAS Certified Specialist',
    titleEn: 'SAS Certified Specialist',
    subtitle: 'Base Programming Using SAS 9.4',
    subtitleEn: 'Base Programming Using SAS 9.4',
    period: '2023/05',
    description: 'ÈÄöÈÅé SAS ÂÆòÊñπË™çË≠âËÄÉË©¶ÔºåÂÖ∑ÂÇôÂ∞àÊ•≠Êï∏ÊìöËôïÁêÜËàáÁµ±Ë®àÁ®ãÂºèË®≠Ë®àËÉΩÂäõ„ÄÇ',
    descriptionEn: 'Passed SAS official certification exam with professional data processing and statistical programming capabilities.',
    tags: ['SAS', 'Statistics', 'Data'],
    logo: sasLogo,
    color: 'from-blue-600 to-cyan-500',
    image: sasCertImage,
  },
  // 2021/07
  {
    type: 'work',
    year: '2021',
    month: '07',
    title: 'Êñ∞ÂåóÂ∏ÇÊñ∞Â∫óÂçÄÂÖ¨ÊâÄ',
    titleEn: 'New Taipei City Xindian District Office',
    subtitle: 'Ë°åÊîøÂØ¶ÁøíÁîü',
    subtitleEn: 'Administrative Intern',
    period: '2021/07 - 2021/09',
    location: 'New Taipei',
    description: 'ÊñºÊîøÂ∫úÊ©üÈóúÈÄ≤Ë°åÊöëÊúüË°åÊîøÂØ¶ÁøíÔºåÊ∑±ÂÖ•‰∫ÜËß£ÂÖ¨ÈÉ®ÈñÄÈÅã‰ΩúÊµÅÁ®ãÔºåÂüπÈ§äÂÖ¨ÊñáÊí∞ÂØ´ËàáË°åÊîø‰∫ãÂãôËôïÁêÜËÉΩÂäõ„ÄÇ',
    descriptionEn: 'Government administrative internship, gaining understanding of public sector operations and developing document writing and administrative skills.',
    achievements: [
      'ÂçîÂä©ÂçÄÂÖ¨ÊâÄÊó•Â∏∏Ë°åÊîøÊ•≠ÂãôËôïÁêÜ',
      'Â≠∏ÁøíÂÖ¨ÊñáÁ≥ªÁµ±Êìç‰ΩúËàáÊ™îÊ°àÁÆ°ÁêÜ',
      'ÂèÉËàáÂçÄÊ∞ëÊúçÂãôÂ∑•‰ΩúÔºåÊèêÂçáÊ∫ùÈÄöËÉΩÂäõ',
    ],
    achievementsEn: [
      'Assisted with daily administrative operations',
      'Learned document system operations and file management',
      'Participated in citizen services, improving communication skills',
    ],
    tags: ['Administration', 'Government', 'Public Service'],
    logo: xindianLogo,
    color: 'from-blue-400 to-blue-600',
  },
  // 2021/05
  {
    type: 'service',
    year: '2021',
    month: '05',
    title: 'Ê∑°Ê±üÂ§ßÂ≠∏Á§æÂçÄÊúçÂãô',
    titleEn: 'TKU Community Service',
    subtitle: 'ÂøóÂ∑•ÊúçÂãô',
    subtitleEn: 'Volunteer Service',
    period: '2021/05',
    description: 'ÂèÉËàáÊ∑°Ê±üÂ§ßÂ≠∏Á§æÂçÄÊúçÂãôÊ¥ªÂãïÔºåÊäïÂÖ•ÂøóÂ∑•ÊúçÂãôÔºåÂüπÈ§äÁ§æÊúÉË≤¨‰ªªÊÑüËàáÂúòÈöäÂêà‰ΩúÁ≤æÁ•û„ÄÇ',
    descriptionEn: 'Participated in TKU community service activities as a volunteer, developing social responsibility and teamwork skills.',
    tags: ['Volunteer', 'Community', 'Service'],
    icon: 'ü§ù',
    color: 'from-orange-400 to-red-500',
    image: tkuCommunityImage,
  },
  // 2020/09
  {
    type: 'education',
    year: '2020',
    month: '09',
    title: 'Ê∑°Ê±üÂ§ßÂ≠∏Áµ±Ë®àÂ≠∏Á≥ª',
    titleEn: 'Tamkang University Department of Statistics',
    subtitle: 'Áµ±Ë®àÂ≠∏Â≠∏Â£´',
    subtitleEn: 'Bachelor of Statistics',
    period: '2020/09 - 2024/06',
    location: 'New Taipei',
    description: 'ÈÄ≤ÂÖ•Ê∑°Ê±üÂ§ßÂ≠∏Áµ±Ë®àÂ≠∏Á≥ªÂ∞±ËÆÄÔºåÂ•†ÂÆöÁ¥ÆÂØ¶ÁöÑÁµ±Ë®àÁêÜË´ñÂü∫Á§éÔºåÂ≠∏ÁøíÊï∏ÊìöÂàÜÊûê„ÄÅÊ©üÁéáË´ñËàáÁµ±Ë®àÊé®Ë´ñÁ≠âÊ†∏ÂøÉË™≤Á®ã„ÄÇ',
    descriptionEn: 'Enrolled in TKU Department of Statistics, building a solid foundation in statistical theory, data analysis, probability, and statistical inference.',
    tags: ['Statistics', 'Data Analysis', 'Mathematics'],
    logo: tkuStatsLogo,
    color: 'from-red-500 to-rose-600',
  },
]

const filteredItems = () => {
  if (activeFilter.value === 'all') return timelineItems
  return timelineItems.filter(item => item.type === activeFilter.value)
}

const getTypeIcon = (type: string) => {
  const icons: Record<string, string> = {
    work: 'üíº',
    education: 'üéì',
    certification: 'üèÖ',
    award: 'üèÜ',
    service: 'ü§ù',
  }
  return icons[type] || 'üìå'
}

const getTypeBadge = (type: string) => {
  const badges: Record<string, { label: string, labelEn: string, class: string }> = {
    work: { label: 'Â∑•‰Ωú', labelEn: 'Work', class: 'bg-blue-100 text-blue-700' },
    education: { label: 'Â≠∏Ê≠∑', labelEn: 'Education', class: 'bg-red-100 text-red-700' },
    certification: { label: 'Ë≠âÁÖß', labelEn: 'Cert', class: 'bg-purple-100 text-purple-700' },
    award: { label: 'Áç≤Áçé', labelEn: 'Award', class: 'bg-yellow-100 text-yellow-700' },
    service: { label: 'ÊúçÂãô', labelEn: 'Service', class: 'bg-green-100 text-green-700' },
  }
  return badges[type] || { label: 'ÂÖ∂‰ªñ', labelEn: 'Other', class: 'bg-gray-100 text-gray-700' }
}
</script>

<template>
  <section id="experience" class="section-padding bg-light-300 relative overflow-hidden">
    <!-- Background -->
    <div class="absolute inset-0 bg-hero-pattern opacity-50"></div>

    <div class="section-container relative">
      <!-- Section Header -->
      <div class="text-center mb-12" data-aos="fade-up">
        <span class="inline-block px-4 py-2 bg-primary-50 text-primary-600 rounded-full text-sm font-medium mb-4">
          {{ t('experience.title') }}
        </span>
        <h2 class="section-title">{{ t('experience.subtitle') }}</h2>
        <p class="text-dark-400 mt-4 max-w-2xl mx-auto">
          {{ locale === 'zh-TW' ? 'ÊàëÁöÑÂ∞àÊ•≠ÊàêÈï∑ÊóÖÁ®ãÔºåÂæûÂ≠∏Ë°ìÁ†îÁ©∂Âà∞Ê•≠ÁïåÂØ¶Êà∞' : 'My professional growth journey, from academic research to industry practice' }}
        </p>
      </div>

      <!-- Filter Tabs -->
      <div class="flex flex-wrap justify-center gap-2 mb-12" data-aos="fade-up" data-aos-delay="100">
        <button
          v-for="filter in filters"
          :key="filter.key"
          @click="activeFilter = filter.key"
          :class="[
            'flex items-center gap-2 px-4 py-2 rounded-xl text-sm font-medium transition-all duration-300',
            activeFilter === filter.key
              ? 'bg-primary-500 text-white shadow-lg'
              : 'bg-white text-dark-400 hover:bg-primary-50 hover:text-primary-600'
          ]"
        >
          <span>{{ filter.icon }}</span>
          {{ locale === 'zh-TW' ? filter.label : filter.labelEn }}
        </button>
      </div>

      <!-- Timeline -->
      <div class="relative">
        <!-- Timeline Line -->
        <div class="absolute left-8 md:left-1/2 top-0 bottom-0 w-0.5 bg-gradient-to-b from-accent-500 via-primary-500 to-primary-300 transform md:-translate-x-1/2"></div>

        <!-- Timeline Start - Future Growth -->
        <div class="relative mb-8" data-aos="fade-up">
          <div class="absolute left-8 md:left-1/2 w-8 h-8 bg-accent-500 rounded-full transform -translate-x-1/2 z-10 flex items-center justify-center shadow-lg animate-pulse">
            <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 10l7-7m0 0l7 7m-7-7v18" />
            </svg>
          </div>
          <div class="text-center pb-4">
            <p class="text-accent-600 font-medium text-sm">
              {{ locale === 'zh-TW' ? 'ÊåÅÁ∫åÊàêÈï∑‰∏≠...' : 'Continuing to grow...' }}
            </p>
          </div>
        </div>

        <!-- Year Markers will be calculated dynamically -->
        <TransitionGroup name="timeline" tag="div" class="space-y-8">
          <template v-for="(item, index) in filteredItems()" :key="`${item.year}-${item.month}-${item.title}`">
            <!-- Year Marker -->
            <div
              v-if="index === 0 || filteredItems()[index - 1]?.year !== item.year"
              class="relative flex items-center justify-center"
            >
              <div class="bg-primary-100 text-primary-700 px-6 py-2 rounded-full font-bold text-lg shadow-sm">
                {{ item.year }}
              </div>
            </div>

            <!-- Timeline Item -->
            <div
              :class="[
                'relative flex flex-col md:flex-row gap-6',
                index % 2 === 0 ? 'md:flex-row' : 'md:flex-row-reverse'
              ]"
              data-aos="fade-up"
              :data-aos-delay="(index % 5) * 50"
            >
              <!-- Timeline Dot with Icon -->
              <div class="absolute left-8 md:left-1/2 transform -translate-x-1/2 z-10">
                <div
                  :class="[
                    'w-10 h-10 rounded-full flex items-center justify-center text-lg shadow-lg border-4 border-white',
                    item.highlight ? 'bg-accent-500 animate-pulse' : 'bg-white'
                  ]"
                >
                  {{ item.logo ? '' : (item.icon || getTypeIcon(item.type)) }}
                  <img v-if="item.logo" :src="item.logo" :alt="item.title" class="w-6 h-6 object-contain" />
                </div>
              </div>

              <!-- Content Card -->
              <div :class="['flex-1 ml-16 md:ml-0', index % 2 === 0 ? 'md:pr-16' : 'md:pl-16']">
                <div
                  :class="[
                    'card p-5 md:p-6 group hover:border-primary-200 border-2 transition-all duration-300',
                    item.highlight ? 'border-accent-400 shadow-lg' : 'border-transparent'
                  ]"
                >
                  <!-- Header -->
                  <div class="flex flex-wrap items-start justify-between gap-3 mb-3">
                    <div class="flex-1">
                      <div class="flex items-center gap-2 mb-1">
                        <!-- Type Badge -->
                        <span :class="['px-2 py-0.5 rounded-full text-xs font-medium', getTypeBadge(item.type).class]">
                          {{ locale === 'zh-TW' ? getTypeBadge(item.type).label : getTypeBadge(item.type).labelEn }}
                        </span>
                        <!-- Highlight Badge -->
                        <span v-if="item.highlight" class="px-2 py-0.5 bg-accent-100 text-accent-700 rounded-full text-xs font-medium">
                          {{ locale === 'zh-TW' ? 'ÈÄ≤Ë°å‰∏≠' : 'Current' }}
                        </span>
                      </div>
                      <h3 class="text-lg font-bold text-primary-700 group-hover:text-primary-600 transition-colors">
                        {{ locale === 'zh-TW' ? item.title : item.titleEn }}
                      </h3>
                      <p class="text-accent-600 font-medium text-sm">
                        {{ locale === 'zh-TW' ? item.subtitle : item.subtitleEn }}
                      </p>
                    </div>
                    <!-- Period -->
                    <div class="text-right">
                      <p class="text-sm font-medium text-dark-500">{{ item.period }}</p>
                      <p v-if="item.location" class="text-xs text-dark-300">{{ item.location }}</p>
                    </div>
                  </div>

                  <!-- Description -->
                  <p class="text-dark-400 text-sm mb-4 leading-relaxed">
                    {{ locale === 'zh-TW' ? item.description : item.descriptionEn }}
                  </p>

                  <!-- Achievements (for work/service items) -->
                  <ul v-if="item.achievements && item.achievements.length > 0" class="space-y-1.5 mb-4">
                    <li
                      v-for="(achievement, i) in (locale === 'zh-TW' ? item.achievements : item.achievementsEn)"
                      :key="i"
                      class="flex items-start gap-2 text-dark-400 text-sm"
                    >
                      <svg class="w-4 h-4 text-accent-500 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                      </svg>
                      {{ achievement }}
                    </li>
                  </ul>

                  <!-- Tags and GitHub Link -->
                  <div class="flex flex-wrap items-center gap-1.5">
                    <span
                      v-for="tag in item.tags"
                      :key="tag"
                      class="px-2.5 py-1 bg-primary-50 text-primary-600 rounded-full text-xs font-medium"
                    >
                      {{ tag }}
                    </span>
                    <!-- GitHub Link -->
                    <a
                      v-if="item.github"
                      :href="item.github"
                      target="_blank"
                      rel="noopener noreferrer"
                      class="ml-auto flex items-center gap-1.5 px-3 py-1 bg-dark-500 text-white rounded-full text-xs font-medium hover:bg-primary-600 transition-colors"
                    >
                      <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 24 24">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                      </svg>
                      {{ locale === 'zh-TW' ? 'Êü•ÁúãÂ∞àÊ°à' : 'View Project' }}
                    </a>
                  </div>

                  <!-- Image (if exists) - Clickable for Lightbox -->
                  <div v-if="item.image" class="mt-4 rounded-xl overflow-hidden cursor-pointer group/img relative" @click="openLightbox(item.image, locale === 'zh-TW' ? item.title : item.titleEn)">
                    <img
                      :src="item.image"
                      :alt="item.title"
                      class="w-full h-40 object-cover group-hover/img:scale-105 transition-transform duration-500"
                    />
                    <!-- Hover overlay with zoom icon -->
                    <div class="absolute inset-0 bg-black/0 group-hover/img:bg-black/30 transition-all duration-300 flex items-center justify-center">
                      <div class="opacity-0 group-hover/img:opacity-100 transform scale-75 group-hover/img:scale-100 transition-all duration-300">
                        <div class="bg-white/90 rounded-full p-3 shadow-lg">
                          <svg class="w-6 h-6 text-primary-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7" />
                          </svg>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Empty space for timeline alignment -->
              <div class="hidden md:block flex-1"></div>
            </div>
          </template>
        </TransitionGroup>
      </div>

      <!-- Timeline End -->
      <div class="relative mt-8" data-aos="fade-up">
        <div class="absolute left-8 md:left-1/2 w-6 h-6 bg-primary-300 rounded-full transform -translate-x-1/2 z-10 flex items-center justify-center">
          <div class="w-3 h-3 bg-primary-500 rounded-full"></div>
        </div>
        <div class="text-center pt-8">
          <p class="text-dark-300 text-sm">
            {{ locale === 'zh-TW' ? 'ÊïÖ‰∫ãÁöÑËµ∑Èªû' : 'Where it all began' }}
          </p>
        </div>
      </div>
    </div>

    <!-- Lightbox Modal -->
    <Teleport to="body">
      <Transition name="lightbox">
        <div
          v-if="selectedImage"
          class="fixed inset-0 z-50 flex items-center justify-center p-4 md:p-8"
          @click="closeLightbox"
        >
          <!-- Backdrop -->
          <div class="absolute inset-0 bg-black/90 backdrop-blur-sm"></div>

          <!-- Image Container -->
          <div class="relative max-w-5xl max-h-full" @click.stop>
            <!-- Close Button -->
            <button
              @click="closeLightbox"
              class="absolute -top-12 right-0 md:top-2 md:-right-12 text-white hover:text-accent-400 transition-colors z-10"
            >
              <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
              </svg>
            </button>

            <!-- Image -->
            <img
              :src="selectedImage"
              :alt="selectedImageTitle"
              class="max-w-full max-h-[85vh] object-contain rounded-lg shadow-2xl"
            />

            <!-- Title -->
            <p class="text-white text-center mt-4 text-lg font-medium">{{ selectedImageTitle }}</p>

            <!-- Hint -->
            <p class="text-white/50 text-center mt-2 text-sm">
              {{ locale === 'zh-TW' ? 'ÈªûÊìä‰ªªÊÑèËôïÊàñÊåâ ESC ÈóúÈñâ' : 'Click anywhere or press ESC to close' }}
            </p>
          </div>
        </div>
      </Transition>
    </Teleport>
  </section>
</template>

<style scoped>
.timeline-enter-active,
.timeline-leave-active {
  transition: all 0.4s ease;
}

.timeline-enter-from,
.timeline-leave-to {
  opacity: 0;
  transform: translateY(20px);
}

.timeline-move {
  transition: transform 0.4s ease;
}

/* Lightbox transitions */
.lightbox-enter-active,
.lightbox-leave-active {
  transition: all 0.3s ease;
}

.lightbox-enter-from,
.lightbox-leave-to {
  opacity: 0;
}

.lightbox-enter-from .relative,
.lightbox-leave-to .relative {
  transform: scale(0.9);
}

.lightbox-enter-active .relative,
.lightbox-leave-active .relative {
  transition: transform 0.3s ease;
}
</style>
